<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Anonimalização de Dados — TADS</title>
  <link rel="stylesheet" href="styles.css">
  <link rel="icon" type="image/x-icon" href="./assets/favicon.ico" />
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdn.boxicons.com/fonts/basic/boxicons.min.css" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
</head>

<body class="bg-gradient-to-b from-emerald-50 via-white to-sky-50 text-slate-900">
  <div class="toast-wrap" id="toasts"></div>

  <header class="sticky top-0 z-40 shadow-sm">
    <div class="bg-gradient-to-r from-emerald-700 to-emerald-600 text-white">
      <div class="max-w-7xl mx-auto px-4 py-2 sm:py-3 flex items-center gap-3 sm:gap-4">
        <div
          class="shrink-0 h-10 w-10 sm:h-12 sm:w-12 md:h-14 md:w-14 rounded-xl p-1 bg-white shadow-sm flex items-center justify-center">
          <i class="bx bxs-database-alt text-emerald-600 text-[28px] sm:text-[36px] md:text-[44px] leading-none"
            aria-label="IF — TADS"></i>
        </div>

        <div class="flex-1 min-w-0">
          <h1 class="text-xl sm:text-2xl md:text-3xl font-semibold tracking-tight truncate">
            Anonimalização de Dados
          </h1>
          <p class="text-emerald-100 text-xs sm:text-sm truncate">
            Gestão de TI · TADS 2023 · Andreza e Pedro
          </p>
        </div>
      </div>
    </div>
  </header>

  <section class="max-w-7xl mx-auto px-4 pt-6 sm:pt-8 fade" id="upload">
    <div class="grid gap-4 sm:gap-6 md:grid-cols-3 items-stretch">
      <div id="uploadCard" class="md:col-span-2 card bg-white rounded-2xl shadow-sm p-4 flex">
        <div id="dropzone"
          class="flex-1 h-full border-2 border-dashed border-emerald-300 rounded-xl flex flex-col items-center justify-center text-center px-6 sm:px-8 py-8 sm:py-10 hover:border-emerald-400 transition min-h-[260px] md:min-h-0">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-9 w-9 sm:h-10 sm:w-10 text-emerald-600 mx-auto"
            viewBox="0 0 24 24" fill="currentColor">
            <path d="M19 15v4a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-4" />
            <path d="M12 12V3m0 0l-4 4m4-4l4 4" stroke="currentColor" stroke-width="2" stroke-linecap="round"
              stroke-linejoin="round" fill="none" />
          </svg>
          <p class="mt-3 text-sm sm:text-base">Arraste o arquivo aqui ou</p>
          <label
            class="mt-2 inline-flex items-center gap-2 px-4 py-2 rounded-xl bg-emerald-600 text-white cursor-pointer hover:bg-emerald-700 w-full sm:w-auto justify-center">
            <input id="fileInput" type="file" class="hidden" accept=".xlsx,.xls,.csv" />
            <span>Escolher arquivo</span>
          </label>
          <p class="mt-3 text-xs sm:text-sm text-slate-500">
            Aceita .xlsx, .xls ou .csv. Processamento 100% local.
          </p>
        </div>
      </div>

      <div id="optsCard" class="card bg-white rounded-2xl shadow-sm p-5 sm:p-6 space-y-5 h-full">
        <h2 class="text-lg font-semibold">Opções</h2>
        <div class="space-y-3">
          <label class="flex items-start gap-3">
            <input id="optNormalize" type="checkbox" class="mt-1" checked />
            <span>
              <span class="font-medium">Normalização avançada</span>
              <span class="block text-sm text-slate-500">Repara UTF-8↔Latin-1, remove controles e padroniza
                Unicode.</span>
            </span>
          </label>
          <label class="flex items-start gap-3">
            <input id="optAnonymize" type="checkbox" class="mt-1" checked />
            <span>
              <span class="font-medium">Anonimizar dados</span>
              <span class="block text-sm text-slate-500">Mascara IDs, e-mails e telefones. Generaliza datas e
                localidades.</span>
            </span>
          </label>
        </div>
        <div class="grid grid-cols-1 sm:grid-cols-2 gap-3 pt-2">
          <button id="btnClear" class="w-full rounded-xl border border-slate-300 py-2 hover:bg-slate-50">
            Limpar
          </button>
          <button id="btnSample" class="w-full rounded-xl bg-emerald-600 text-white py-2 hover:bg-emerald-700">
            Carregar exemplo
          </button>
        </div>
      </div>
    </div>
  </section>

  <section id="summaryCard" class="max-w-7xl mx-auto px-4 mt-6 fade hidden">
    <div class="card bg-white rounded-2xl shadow-sm p-5 sm:p-6 flex flex-wrap items-center justify-between gap-4">
      <div class="space-y-1 min-w-0">
        <p id="fileName" class="text-sm text-slate-500 truncate"></p>
        <div class="flex flex-wrap items-center gap-2">
          <span
            class="inline-flex items-center gap-1 px-2 py-1 text-xs rounded-full bg-slate-100 text-slate-700 border border-slate-200"><span
              id="rowsCount">0</span><span>linhas</span></span>
          <span
            class="inline-flex items-center gap-1 px-2 py-1 text-xs rounded-full bg-slate-100 text-slate-700 border border-slate-200"><span
              id="colsCount">0</span><span>colunas</span></span>
          <span
            class="inline-flex items-center gap-1 px-2 py-1 text-xs rounded-full bg-red-100 text-red-700 border border-red-200"><span
              id="sensitiveCount">0</span><span>sensíveis</span></span>
          <span
            class="inline-flex items-center gap-1 px-2 py-1 text-xs rounded-full bg-red-100 text-red-700 border border-red-200"><span
              id="qidCount">0</span><span>quase identificadores</span></span>
        </div>
      </div>
      <div class="flex flex-col sm:flex-row gap-2 sm:gap-3 w-full sm:w-auto">
        <button id="btnDownloadCSV"
          class="w-full sm:w-auto px-4 py-2 rounded-xl bg-emerald-600 text-white hover:bg-emerald-700">
          Baixar CSV
        </button>
        <button id="btnDownloadXLSX"
          class="w-full sm:w-auto px-4 py-2 rounded-xl border border-slate-300 hover:bg-slate-50">
          Baixar XLSX
        </button>
      </div>
    </div>
  </section>

  <section id="resultados" class="max-w-7xl mx-auto px-4 mt-6 fade hidden" aria-label="Resultados">
    <input id="searchInput" type="search" placeholder="Filtrar linhas…"
      class="w-full bg-white rounded-2xl shadow-sm border border-slate-300 px-4 py-2 mb-4" />
    <div class="card bg-white rounded-2xl shadow-sm p-0">
      <div class="table-scroll overflow-x-auto">
        <table id="dataTable" class="min-w-full text-sm">
          <thead id="tableHead" class="bg-emerald-50"></thead>
          <tbody id="tableBody"></tbody>
        </table>
      </div>
    </div>
    <div id="pager" class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 mt-4">
      <p class="text-sm text-slate-600"><span id="pageInfo"></span></p>
      <div class="flex gap-2">
        <button id="prevPage" class="px-3 py-1 rounded-lg border border-slate-300 hover:bg-slate-50">
          Anterior
        </button>
        <button id="nextPage" class="px-3 py-1 rounded-lg border border-slate-300 hover:bg-slate-50">
          Próxima
        </button>
      </div>
    </div>
  </section>

  <section id="funcionamento" class="max-w-7xl mx-auto px-4 py-10 sm:py-12 fade">
    <div class="grid md:grid-cols-2 gap-4 sm:gap-6">
      <details class="card bg-white rounded-2xl shadow-sm overflow-hidden">
        <summary class="acc-summary px-5 sm:px-6 py-4 flex items-center justify-between">
          <div class="flex items-center gap-3">
            <span class="inline-flex items-center justify-center w-8 h-8 rounded-xl bg-emerald-100">
              <i class="bx bxs-info-shield" style="color: #059669"></i>
            </span>
            <h2 class="text-base sm:text-lg font-semibold">
              Como o sistema processa
            </h2>
          </div>
          <svg class="acc-chevron w-5 h-5 text-slate-500" viewBox="0 0 24 24" fill="none" stroke="currentColor"
            stroke-width="2">
            <path d="M6 9l6 6 6-6" stroke-linecap="round" stroke-linejoin="round" />
          </svg>
        </summary>
        <div class="px-5 sm:px-6 pb-5 sm:pb-6">
          <ol class="mt-1 space-y-3 text-sm text-slate-700">
            <li class="flex gap-3">
              <span
                class="flex-none w-6 h-6 rounded-full bg-emerald-600 text-white text-xs grid place-items-center">1</span>
              <div>
                <strong>Leitura local</strong><br />File API +
                <code class="bg-slate-100 px-1 rounded">xlsx.js</code>. Nada
                sai do navegador.
              </div>
            </li>
            <li class="flex gap-3">
              <span
                class="flex-none w-6 h-6 rounded-full bg-emerald-600 text-white text-xs grid place-items-center">2</span>
              <div>
                <strong>Normalização de textos</strong><br />Corrige
                UTF-8↔Latin-1 e “ ”, normaliza Unicode NFC e remove controles.
              </div>
            </li>
            <li class="flex gap-3">
              <span
                class="flex-none w-6 h-6 rounded-full bg-emerald-600 text-white text-xs grid place-items-center">3</span>
              <div>
                <strong>Inferência de tipos</strong><br />Regras detectam
                datas, telefones, CEPs e e-mails quando o nome é ambíguo.
              </div>
            </li>
            <li class="flex gap-3">
              <span
                class="flex-none w-6 h-6 rounded-full bg-emerald-600 text-white text-xs grid place-items-center">4</span>
              <div>
                <strong>Classificação</strong><br />Diretas: nome, e-mail,
                telefone, CPF, endereço. Quase identificadores: CEP, cidade,
                bairro, datas, nascimento.
              </div>
            </li>
            <li class="flex gap-3">
              <span
                class="flex-none w-6 h-6 rounded-full bg-emerald-600 text-white text-xs grid place-items-center">5</span>
              <div>
                <strong>Anonimização</strong><br />E-mail → token; telefone →
                <code>(**) *****-1234</code>; CPF/ID → token; nome →
                “REMOVIDO”; endereço → “OCULTO”; data → <code>YYYY-MM</code>;
                cidade → inicial+“***”; CEP → <code>12345-XXX</code>.
              </div>
            </li>
            <li class="flex gap-3">
              <span
                class="flex-none w-6 h-6 rounded-full bg-emerald-600 text-white text-xs grid place-items-center">6</span>
              <div><strong>Exportação</strong><br />CSV e XLSX tratados.</div>
            </li>
          </ol>
        </div>
      </details>

      <details class="card bg-white rounded-2xl shadow-sm overflow-hidden">
        <summary class="acc-summary px-5 sm:px-6 py-4 flex items-center justify-between">
          <div class="flex items-center gap-3">
            <span class="inline-flex items-center justify-center w-8 h-8 rounded-xl bg-sky-100">
              <i class="bx bxs-database" style="color: #0369a1"></i>
            </span>
            <h3 class="text-base sm:text-lg font-semibold">
              Detecção e tratamento
            </h3>
          </div>
          <svg class="acc-chevron w-5 h-5 text-slate-500" viewBox="0 0 24 24" fill="none" stroke="currentColor"
            stroke-width="2">
            <path d="M6 9l6 6 6-6" stroke-linecap="round" stroke-linejoin="round" />
          </svg>
        </summary>
        <div class="px-5 sm:px-6 pb-5 sm:pb-6">
          <div class="space-y-3 text-sm text-slate-700">
            <div>
              <p class="font-medium">Como detectamos colunas sensíveis</p>
              <ul class="list-disc list-inside mt-1 space-y-1">
                <li>
                  <strong>Diretas:</strong> <code>cpf</code>, <code>rg</code>,
                  <code>nome</code>, <code>email</code>/<code>e-mail</code>,
                  <code>telefone</code>/<code>celular</code>,
                  <code>endereco</code>/<code>endereço</code>,
                  <code>id</code>, <code>senha</code>.
                </li>
                <li>
                  <strong>Quase identificadores:</strong> <code>cep</code>,
                  <code>cidade</code>/<code>município</code>,
                  <code>bairro</code>, <code>data</code>/<code>dt_</code>,
                  <code>nascimento</code>.
                </li>
              </ul>
            </div>
            <div>
              <p class="font-medium">Tratamento por tipo</p>
              <ul class="list-disc list-inside mt-1 space-y-1">
                <li>E-mail → token determinístico + domínio neutro.</li>
                <li>Telefone → máscara com últimos 4 dígitos.</li>
                <li>CPF/ID/RG → hashing estável.</li>
                <li>Nomes → remoção do conteúdo.</li>
                <li>Endereço → ocultação de logradouro e número.</li>
                <li>
                  Datas → mês/ano; Cidade → inicial; CEP → sufixo ofuscado.
                </li>
              </ul>
            </div>
            <div class="bg-slate-50 rounded-xl p-3 border border-slate-200">
              <p class="text-xs text-slate-600">
                As <span class="text-red-700 font-semibold">badges</span> no
                cartão de download mostram colunas sensíveis e quase
                identificadores.
              </p>
            </div>
          </div>
        </div>
      </details>
    </div>
  </section>

  <footer class="mt-8 bg-white border-t border-slate-200">
    <div class="max-w-7xl mx-auto px-4 py-6 text-sm text-slate-600 flex flex-wrap items-center justify-between gap-3">
      <div>
        <strong>Anonimalização de Dados</strong> · Gestão de TI · TADS
        <span class="block text-xs">Alunos: Andreza Soares e Pedro Borges</span>
      </div>
    </div>
  </footer>
  <script src="script.js"></script>
</body>
</html>